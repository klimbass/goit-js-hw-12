{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-close.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet fetchPixabayAPI = async set => {\n  return await axios.get(`https://pixabay.com/api/?${set}`).then(request => {\n    return request.data;\n    \n  });\n};\n\nexport default fetchPixabayAPI;\n","export default function renderGallery(arr) {\n  return arr.reduce((accum, item) => {\n    return (accum += `<div class=\"image-box\">\n                        <a href=\"${item.largeImageURL}\">\n                       <img class=\"image\" src=${item.webformatURL} alt=\"${item.tags}\"  height=\"200\" width=\"360\"/>\n                          <div class=\"image-discr\">\n                            <p class=\"text\"><span class=\"image-title\">Likes</span>${item.likes}</p>\n                            <p class=\"text\"><span class=\"image-title\">Views</span>${item.views}</p>\n                            <p class=\"text\"><span class=\"image-title\">Comments</span>${item.comments}</p>\n                            <p class=\"text\"><span class=\"image-title\">Downloads</span>${item.downloads}</p> \n                          </div>\n                        </a>\n                    </div>`);\n  }, '');\n}\n","export default \"__VITE_ASSET__e36160dc__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport fetchPixabayAPI from './js/pixabay-api.js';\nimport renderGallery from './js/render-functions.js';\n\nimport axios from 'axios';\nimport icon from './img/icon-close.svg';\n\nconst optionsSearch = new URLSearchParams({\n  key: '4348225-c90d49c3185e1d6dd0df9aa80',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: 1,\n});\n\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\n\nconst gallery = document.querySelector('.gallery');\n\nconst form = document.querySelector('.form');\n\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchRequest = event.target.elements.input.value.trim();\n\n  if (searchRequest) {\n    gallery.innerHTML = '';\n    loader.classList.remove('invisible');\n    optionsSearch.set('q', searchRequest);\n    optionsSearch.set('page', 1);\n\n    fetchPixabayAPI(optionsSearch)\n      .then(async data => {\n        if (data.hits.length === 0) {\n          loader.classList.add('invisible');\n          gallery.innerHTML = '';\n          iziToast.error({\n            position: 'topRight',\n            maxWidth: '380px',\n            progressBar: false,\n            iconUrl: icon,\n            transitionIn: 'fadeInLeft',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        } else {\n          loader.classList.add('invisible');\n          gallery.innerHTML = await renderGallery(data.hits);\n          optionsSearch.set('page', Number(optionsSearch.get('page')) + 1);\n\n          const gallerySimple = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n          });\n          gallerySimple.refresh();\n          if (data.hits.length < data.total) {\n            btnLoadMore.classList.remove('invisible');\n          }\n        }\n      })\n      .catch(err => {\n        iziToast.error({\n          position: 'topRight',\n          maxWidth: '380px',\n          progressBar: false,\n          iconUrl: icon,\n          transitionIn: 'fadeInLeft',\n          message: `Error:${err} `,\n        });\n      });\n  } else {\n    loader.classList.add('invisible');\n    gallery.innerHTML = '';\n    iziToast.show({\n      progressBar: false,\n      position: 'topRight',\n      maxWidth: '380px',\n      iconUrl: icon,\n      transitionIn: 'fadeInLeft',\n      message: 'Put the request!',\n    });\n  }\n  form.reset();\n});\n\nbtnLoadMore.addEventListener('click', loadMore);\n\nfunction loadMore() {\n  btnLoadMore.classList.add('invisible');\n  loaderMore.classList.remove('invisible');\n  fetchPixabayAPI(optionsSearch).then(data => {\n    if (data.hits.length === 0) {\n      loaderMore.classList.add('invisible');\n      gallery.innerHTML = '';\n      iziToast.error({\n        position: 'topRight',\n        maxWidth: '380px',\n        progressBar: false,\n        iconUrl: icon,\n        transitionIn: 'fadeInLeft',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      loaderMore.classList.add('invisible');\n      gallery.insertAdjacentHTML('beforeend', renderGallery(data.hits));\n      optionsSearch.set('page', Number(optionsSearch.get('page')) + 1);\n      const gallerySimple = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      gallerySimple.refresh();\n      const cardSize = document\n        .querySelector('.image-box')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardSize * 2 + 72,\n        behavior: 'smooth',\n      });\n      if (\n        (Number(optionsSearch.get('page')) - 1) *\n          Number(optionsSearch.get('per_page')) <\n        data.total\n      ) {\n        btnLoadMore.classList.remove('invisible');\n      } else {\n        iziToast.show({\n          position: 'topRight',\n          maxWidth: '380px',\n          progressBar: false,\n          iconUrl: icon,\n          transitionIn: 'fadeInLeft',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    }\n  });\n}\n"],"names":["fetchPixabayAPI","set","axios","request","renderGallery","arr","accum","item","icon","optionsSearch","loader","loaderMore","gallery","form","btnLoadMore","event","searchRequest","data","iziToast","SimpleLightbox","err","loadMore","cardSize"],"mappings":"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"}